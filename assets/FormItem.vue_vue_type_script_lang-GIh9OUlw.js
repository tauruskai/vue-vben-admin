var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,oe=Object.prototype.propertyIsEnumerable;var z=(e,m,b)=>m in e?Z(e,m,{enumerable:!0,configurable:!0,writable:!0,value:b}):e[m]=b,u=(e,m)=>{for(var b in m||(m={}))se.call(m,b)&&z(e,b,m[b]);if(W)for(var b of W(m))oe.call(m,b)&&z(e,b,m[b]);return e},H=(e,m)=>ee(e,te(m));import{c as q,u as s,d as ne,I as le,m as ae,k as p,i as re,ac as J,A as ce,G as ie}from"./vue-BjERyvPm.js";import{c as $}from"./componentMap-C2ZbIOVz.js";import{s as E,h as de,O as fe,Q as ue}from"./entry/index-OSvE6z0v-1715666910873.js";import{i as me,N as K,c as G,s as he}from"./helper-ySEuMwrK.js";import{aa as pe,e as g,ai as F,V as Q,a4 as be,a2 as U,f as ge,r as ye,w as Ce}from"./antd-BmrhB3rb.js";function Pe(e){return"slot"in e}function xe(e){return!Pe(e)}function we(e,m){return q(()=>{const b=s(e),{labelCol:j={},wrapperCol:M={}}=b.itemProps||{},{labelWidth:N,disabledLabelWidth:h}=b,{labelWidth:C,labelCol:L,wrapperCol:O,layout:T}=s(m);if(!C&&!N&&!L||h)return j.style={textAlign:"left"},{labelCol:j,wrapperCol:M};let w=N||C;const V=u(u({},L),j),D=u(u({},O),M);return w&&(w=pe(w)?`${w}px`:w),{labelCol:u({style:{width:w}},V),wrapperCol:u({style:{width:T==="vertical"?"100%":`calc(100% - ${w})`}},D)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!re(e)}const je=ne({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:m}){const{t:b}=de(),{schema:j,formProps:M}=le(e);j.value.component==="CropperAvatar"&&typeof M.value.size=="string"&&(M.value.size=void 0);const N=we(j,M),h=q(()=>{const{allDefaultValues:o,formModel:t,schema:r}=e,{mergeDynamicData:a}=e.formProps;return{field:r.field,model:t,values:u(u(u({},a),o),t),schema:r}}),C=q(()=>{var c;const{schema:o,tableAction:t,formModel:r,formActionType:a}=e;let{componentProps:l={}}=o;return g(l)&&(l=(c=l({schema:o,tableAction:t,formModel:r,formActionType:a}))!=null?c:{}),me(o.component)&&(l=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},l)),l}),L=q(()=>{const{disabled:o}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=s(C);let a=!!o||r;return F(t)&&(a=t),g(t)&&(a=t(s(h))),a}),O=q(()=>{const{readonly:o}=e.formProps,{dynamicReadonly:t}=e.schema,{readonly:r=!1}=s(C);let a=o||r;return F(t)&&(a=t),g(t)&&(a=t(s(h))),a});function T(){const{show:o,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,a=r&&F(e.isAdvanced)?e.isAdvanced:!0;let l=!0,c=!0;return F(o)&&(l=o),F(t)&&(c=t),g(o)&&(l=o(s(h))),g(t)&&(c=t(s(h))),l=l&&a,{isShow:l,isIfShow:c}}function w(){var v;const{rules:o=[],component:t,rulesMessageJoinLabel:r,label:a,dynamicRules:l,required:c}=e.schema;if(g(l))return l(s(h));let n=ge(o);const{rulesMessageJoinLabel:A}=e.formProps,S=(Reflect.has(e.schema,"rulesMessageJoinLabel")?r:A)?g(a)?"":a:"",P=t?G(t)+S:S;function i(f,d){const x=f.message||P;return d===void 0||ye(d)||Array.isArray(d)&&d.length===0||typeof d=="string"&&d.trim()===""||typeof d=="object"&&Reflect.has(d,"checked")&&Reflect.has(d,"halfChecked")&&Array.isArray(d.checked)&&Array.isArray(d.halfChecked)&&d.checked.length===0&&d.halfChecked.length===0?Promise.reject(x):Promise.resolve()}const R=g(c)?c(s(h)):c;if(R)if(!n||n.length===0){const f=K.includes(t||"Input")?"blur":"change";n=[{required:R,validator:i,trigger:f}]}else n.findIndex(d=>Reflect.has(d,"required"))===-1&&n.push({required:R,validator:i});const k=n.findIndex(f=>Reflect.has(f,"required")&&!Reflect.has(f,"validator"));if(k!==-1){const f=n[k],{isShow:d}=T();if(d||(f.required=!1),t){f.message=f.message||P,(t.includes("Input")||t.includes("Textarea"))&&(f.whitespace=!0);const x=(v=s(C))==null?void 0:v.valueFormat;he(f,t,x)}}const y=n.findIndex(f=>f.max);return y!==-1&&!n[y].validator&&(n[y].message=n[y].message||b("component.form.maxTip",[n[y].max])),n}function V(){var f;if(!xe(e.schema))return null;const{renderComponentContent:o,component:t,field:r,changeEvent:a="change",valueField:l}=e.schema,c=t&&["Switch","Checkbox"].includes(t),n=`on${Ce(a)}`,A={[n]:(...d)=>{const[x]=d,B=x?x.target:null,Y=B?c?B.checked:B.value:x;e.setFormModel(r,Y,e.schema),i[n]&&i[n](...d)}},I=$.get(t),{autoSetPlaceHolder:S,size:P}=e.formProps,i=H(u({allowClear:!0,size:P},s(C)),{disabled:s(L),readonly:s(O)});!i.disabled&&S&&t!=="RangePicker"&&t&&(i.placeholder=((f=s(C))==null?void 0:f.placeholder)||G(t)),i.codeField=r,i.formValues=s(h);const k={[l||(c?"checked":"value")]:e.formModel[r]},y=u(u(u({},i),A),k);if(!o)return p(I,y,null);const v=g(o)?u({},o(s(h),{disabled:s(L),readonly:s(O)})):{default:()=>o};return p(I,y,_(v)?v:{default:()=>[v]})}function D(){const{label:o,helpMessage:t,helpComponentProps:r,subLabel:a}=e.schema,l=g(o)?o(s(h)):o,c=a?p("span",null,[l,ie(" "),p("span",{class:"text-secondary"},[a])]):l,n=g(t)?t(s(h)):t;return!n||Array.isArray(n)&&n.length===0?c:p("span",null,[c,p(ue,J({placement:"top",class:"mx-1",text:n},r),null)])}function X(){const{itemProps:o,slot:t,render:r,field:a,suffix:l,component:c,prefix:n}=e.schema,{labelCol:A,wrapperCol:I}=s(N),{colon:S}=e.formProps,P={disabled:s(L),readonly:s(O)};if(c==="Divider"){let i;return p(Q,{span:24},{default:()=>[p(be,s(C),_(i=D())?i:{default:()=>[i]})]})}else if(c==="BasicTitle"){let i;return p(U.Item,{labelCol:A,wrapperCol:I,name:a,class:{"suffix-item":!!l,"prefix-item":!!n}},{default:()=>[p(fe,s(C),_(i=D())?i:{default:()=>[i]})]})}else{const i=()=>t?E(m,t,s(h),P):r?r(s(h),P):V(),R=!!l,k=g(l)?l(s(h)):l,y=!!n,v=g(n)?n(s(h)):n;return c&&K.includes(c)&&e.schema&&(e.schema.itemProps=u({autoLink:!1},e.schema.itemProps)),p(U.Item,J({name:a,colon:S,class:{"suffix-item":R,"prefix-item":y}},o,{label:D(),rules:w(),labelCol:A,wrapperCol:I}),{default:()=>[p("div",{style:"display:flex"},[y&&p("span",{class:"prefix"},[v]),p("div",{style:"flex:1;"},[i()]),R&&p("span",{class:"suffix"},[k])])]})}}return()=>{let o;const{colProps:t={},colSlot:r,renderColContent:a,component:l,slot:c}=e.schema;if(!(l&&$.has(l)||c))return null;const{baseColProps:n={}}=e.formProps,A=u(u({},n),t),{isIfShow:I,isShow:S}=T(),P=s(h),i={disabled:s(L),readonly:s(O)};return I&&ae(p(Q,A,_(o=r?E(m,r,P,i):a?a(P,i):X())?o:{default:()=>[o]}),[[ce,S]])}}});export{je as _};
